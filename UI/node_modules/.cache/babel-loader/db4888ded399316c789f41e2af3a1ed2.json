{"ast":null,"code":"var _jsxFileName = \"/Users/elifdemir/Desktop/week4/jss-exercise-react/src/AddBook.js\";\nimport { toast } from \"react-toastify\";\nimport \"./App.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\nimport React from \"react\";\nimport { Button, Container, Grid, Header, Table, Label, Menu, Icon, Popup, Select, Input, Form, Segment } from \"semantic-ui-react\";\n\nclass AddBook extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.addBook = (name, author) => {\n      fetch(\"http://localhost:8081/api/book/addBook?\" + new URLSearchParams({\n        bookname: name,\n        author: author\n      }), {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          return r;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).then(r => {\n        return r.json();\n      }).catch(e => {\n        toast.error(e.message);\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.getBooks();\n    };\n\n    this.statePage = {\n      activeItem: \"Kitaplar\"\n    };\n\n    this.handleItemClick = (e, {\n      name\n    }) => {\n      this.setState({\n        activeItem: name\n      });\n      const {\n        history\n      } = useHistory();\n      history.push(\"/loginadmin\");\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n    };\n\n    this.handleInputChange = event => {\n      event.preventDefault();\n      this.setState({\n        searchWord: event.target.value\n      });\n    };\n\n    this.logout = event => {\n      fetch(\"http://localhost:8081/logout\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          this.setState({\n            redirect: true\n          });\n          return true;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).catch(e => {\n        toast.error(\"e.message\");\n      });\n    };\n\n    this.deleteAdmin = favId => {\n      fetch(`http://localhost:8081/api/book/deleteBook?id=${favId}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          toast.info(\"Başarıyla silindi\");\n          return r;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).catch(e => {\n        toast.error(e.message);\n      });\n    };\n\n    this.getBooks = () => {\n      fetch(\"http://localhost:8081/api/book?\" + new URLSearchParams({\n        pageNumber: this.state.currentPage\n      }), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          return r;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).then(r => {\n        return r.json();\n      }).then(data => {\n        //toast.info(`Toplamda ${data.totalElements} eleman bulundu.`);\n        this.setState({\n          book: data\n        });\n      }).catch(e => {\n        toast.error(e.message);\n      });\n    };\n\n    this.addBook = (name, author) => {\n      fetch(\"http://localhost:8081/api/book/addBook?\" + new URLSearchParams({\n        bookname: name,\n        author: author\n      }), {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          return r;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).then(r => {\n        return r.json();\n      }).catch(e => {\n        toast.error(e.message);\n      });\n    };\n\n    this.changePageTo = i => {\n      this.setState({\n        currentPage: i\n      }, this.getBooks);\n    };\n\n    this.searchBook = () => {\n      fetch(\"http://localhost:8081/api/book/search-book-admin?\" + new URLSearchParams({\n        bookname: this.state.searchWord\n      }), {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      }).then(r => {\n        if (r.ok) {\n          return r;\n        }\n\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      }).then(r => {\n        return r.json();\n      }).then(data => {\n        this.setState({\n          book: data\n        });\n      }).catch(e => {\n        toast.error(e.message);\n      });\n    };\n\n    this.render = () => {\n      const {\n        book\n      } = this.state;\n      const {\n        activeItem\n      } = this.statePage;\n\n      if (this.state.redirect) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          push: true,\n          to: \"/login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 14\n          }\n        });\n      }\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 9\n        }\n      }, \"First Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"First Name\",\n        name: \"name\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }\n      }, \"Last Name\"), /*#__PURE__*/React.createElement(\"input\", {\n        placeholder: \"Last Name\",\n        name: \"author\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 7\n        }\n      })), /*#__PURE__*/React.createElement(Form.Field, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(Button, {\n        type: \"submit\",\n        onClick: e => {\n          e.preventDefault();\n          this.addBook(\"ruzgarin adi\", \"rothfuss\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 5\n        }\n      }, \"Submit\"))));\n    };\n\n    this.state = {\n      book: {},\n      who: [],\n      currentPage: 0,\n      bookID: null,\n      searchWord: \"\",\n      bookFav: []\n    };\n  }\n\n}\n\nexport default withRouter(AddBook);","map":{"version":3,"sources":["/Users/elifdemir/Desktop/week4/jss-exercise-react/src/AddBook.js"],"names":["toast","withRouter","Link","useHistory","Redirect","React","Button","Container","Grid","Header","Table","Label","Menu","Icon","Popup","Select","Input","Form","Segment","AddBook","Component","constructor","props","addBook","name","author","fetch","URLSearchParams","bookname","method","headers","credentials","then","r","ok","status","Promise","reject","Error","json","catch","e","error","message","componentDidMount","getBooks","statePage","activeItem","handleItemClick","setState","history","push","handleSubmit","event","preventDefault","handleInputChange","searchWord","target","value","logout","redirect","deleteAdmin","favId","info","pageNumber","state","currentPage","data","book","changePageTo","i","searchBook","render","who","bookID","bookFav"],"mappings":"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","sourcesContent":["import { toast } from \"react-toastify\";\nimport \"./App.css\";\nimport { withRouter } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { useHistory } from \"react-router-dom\";\nimport { Redirect } from 'react-router';\nimport React from \"react\";\nimport {\n  Button,\n  Container,\n  Grid,\n  Header,\n  Table,\n  Label,\n  Menu,\n  Icon,\n  Popup,\n  Select,\n  Input,\n  Form,\n  Segment,\n} from \"semantic-ui-react\";\n\nclass AddBook extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      book: {},\n      who: [],\n      currentPage: 0,\n      bookID: null,\n      searchWord: \"\",\n      bookFav: [],\n    };\n  };\n\n  addBook = (name, author) => {\n    fetch(\n      \"http://localhost:8081/api/book/addBook?\" +\n        new URLSearchParams({ bookname: name, author: author }),\n      {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n      }\n    )\n    .then((r) => {\n      if (r.ok) {\n        return r;\n      }\n      if (r.status === 401 || r.status === 403 || r.status === 500) {\n        return Promise.reject(new Error(\"Bir hata oluştu\"));\n      }\n    })\n    .then((r) => {\n      return r.json();\n    })\n    .catch((e) => {\n      toast.error(e.message);\n    });\n  };\n\n  componentDidMount = () => {\n    this.getBooks();\n  };\n\n  statePage = { activeItem: \"Kitaplar\" };\n\n  handleItemClick = (e, { name }) => {\n    this.setState({ activeItem: name });\n    const { history } = useHistory();\n    history.push(\"/loginadmin\");\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n  }\n  handleInputChange = (event) => {\n    event.preventDefault();\n    this.setState({\n      searchWord : event.target.value\n    })\n  };\n\n  logout = (event) => {\n    fetch(\"http://localhost:8081/logout\",{\n      method: \"POST\",\n      headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      credentials : \"include\",\n  })\n  .then((r) => {\n      if(r.ok){\n         this.setState({redirect: true});\n         return true;\n      }\n      if( r.status===401 || r.status === 403 || r.status === 500 ){\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n      }\n  })\n  .catch((e) => {\n      toast.error(\"e.message\");\n  } );\n};\n\n  deleteAdmin = (favId) => {\n    fetch(\n      `http://localhost:8081/api/book/deleteBook?id=${favId}`,\n      {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n      }\n    ).then((r) => {\n      if (r.ok) {\n        toast.info(\"Başarıyla silindi\");\n        return r;\n      }\n      if (r.status === 401 || r.status === 403 || r.status === 500) {\n        return Promise.reject(new Error(\"Bir hata oluştu\"));\n      }\n    })\n    .catch((e) => {\n      toast.error(e.message);\n    });\n  };\n\n  getBooks = () => {\n    fetch(\n      \"http://localhost:8081/api/book?\" +\n        new URLSearchParams({ pageNumber: this.state.currentPage }),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n      }\n    )\n      .then((r) => {\n        if (r.ok) {\n          return r;\n        }\n        if (r.status === 401 || r.status === 403 || r.status === 500) {\n          return Promise.reject(new Error(\"Bir hata oluştu\"));\n        }\n      })\n      .then((r) => {\n        return r.json();\n      })\n      .then((data) => {\n        //toast.info(`Toplamda ${data.totalElements} eleman bulundu.`);\n\n        this.setState({ book: data });\n      })\n      .catch((e) => {\n        toast.error(e.message);\n      });\n  };\n\n  addBook = (name, author) => {\n    fetch(\n      \"http://localhost:8081/api/book/addBook?\" +\n        new URLSearchParams({ bookname: name, author: author }),\n      {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n      }\n    )\n    .then((r) => {\n      if (r.ok) {\n        return r;\n      }\n      if (r.status === 401 || r.status === 403 || r.status === 500) {\n        return Promise.reject(new Error(\"Bir hata oluştu\"));\n      }\n    })\n    .then((r) => {\n      return r.json();\n    })\n    .catch((e) => {\n      toast.error(e.message);\n    });\n  };\n\n  changePageTo = (i) => {\n    this.setState({ currentPage: i }, this.getBooks);\n  };\n\n  searchBook = () => {\n    fetch(\n      \"http://localhost:8081/api/book/search-book-admin?\" +\n        new URLSearchParams({ bookname: this.state.searchWord }),\n      {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        credentials: \"include\",\n      }\n    )\n    .then((r) => {\n      if (r.ok) {\n        return r;\n      }\n      if (r.status === 401 || r.status === 403 || r.status === 500) {\n        return Promise.reject(new Error(\"Bir hata oluştu\"));\n      }\n    })\n    .then((r) => {\n      return r.json();\n    })\n    .then((data) => {\n      this.setState({ book: data });\n    })\n    .catch((e) => {\n      toast.error(e.message);\n    });\n  };\n\n  render = () => {\n    const { book } = this.state;\n    const { activeItem } = this.statePage;\n\n    if (this.state.redirect) {\n      return <Redirect push to=\"/login\" />;\n    }\n    return (\n      <div className=\"App\">\n        <Container> \n        <Form>\n        <Form.Field>\n        <label>First Name</label>\n        <input placeholder='First Name' name = \"name\" />\n        </Form.Field>\n        <Form.Field>\n        <label>Last Name</label>\n      <input placeholder='Last Name' name = \"author\"/>\n    </Form.Field>\n    <Form.Field>\n    </Form.Field>\n    <Button type='submit'\n     onClick = {(e) => {e.preventDefault(); this.addBook(\"ruzgarin adi\", \"rothfuss\") } }\n     >Submit</Button>\n  </Form>\n        </Container>\n      </div>\n    );\n  };\n}\n\nexport default withRouter(AddBook);\n"]},"metadata":{},"sourceType":"module"}